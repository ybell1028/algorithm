package Programmers.YAPP.Week6;

import java.util.*;

public class Exam42584_주식가격 {
    static class Solution {
        public int[] solution(int[] prices) {
            int len = prices.length;
            int[] answer = new int[len];
            Stack<int[]> stack = new Stack<>();

            for(int i = len - 2; i >= 0; --i){
                if(prices[i] > prices[i + 1]){
                    answer[i] = 1;
                    stack.push(new int[] {prices[i + 1], i + 1});
                } else {
                    while(stack.size() > 0 && stack.peek()[0] >= prices[i]){
                        stack.pop();
                    }
                    if(stack.size() == 0){
                        answer[i] = len - i - 1;
                    } else {
                        answer[i] = stack.peek()[1] - i;
                    }
                }
            }
            return answer;
        }

        public static void main(String[] args) {
            int[] prices = {1, 2, 3, 2, 3};
            int[] prices1 = {5, 4, 3, 8, 7, 9};
            int[] prices2 = {1, 3, 5, 2};
            int[] prices3 = {6, 5, 1, 2, 2, 2};
            int[] prices4 = {1, 2, 1, 2, 3, 3, 4, 5, 1, 6};
            int[] prices5 = {1607, 9386, 3772, 9980, 4490, 6347, 4732, 2366, 612, 8141, 3844, 4637, 5863, 2465, 3532, 2758, 3211, 5761, 1041, 9785, 3455, 980, 8519, 3118, 6581, 7967, 5852, 6380, 3780, 9933, 9104, 3637, 8951, 4272, 3811, 2323, 5082, 1049, 1611, 5256, 5282, 7902, 742, 1405, 447, 5800, 5783, 9721, 5544, 6134, 9679, 253, 4315, 5955, 1584, 2021, 7846, 4818, 7322, 7682, 5892, 3658, 5396, 881, 1109, 3395, 373, 3370, 5408, 8569, 7206, 5472, 4541, 9175, 4606, 5266, 1725, 2117, 2900, 9000, 3614, 2192, 2029, 7653, 2254, 1388, 8252, 2339, 4793, 4393, 3980, 4267, 8666, 7704, 3715, 3375, 3725, 9485, 513, 3406, 4371, 7420, 1616, 222, 4123, 2198, 8925, 4419, 2243, 4984, 9857, 8970, 7076, 8270, 6780, 7508, 3559, 797, 8715, 9145, 2997, 8946, 7268, 1252, 1652, 8910, 9861, 2518, 954, 6262, 7271, 4758, 6215, 2107, 9176, 3461, 2593, 7925, 971, 3868, 6782, 4396, 7486, 1478, 393, 3060, 4354, 3325, 6313, 3463, 5811, 9108, 2474, 2627, 8470, 9314, 8402, 8121, 4216, 840, 8683, 787, 1794, 9300, 4052, 8290, 5892, 1216, 5187, 6008, 4540, 8561, 6515, 7557, 543, 2785, 7300, 3208, 276, 5349, 5163, 843, 3699, 7066, 2766, 711, 2706, 9079, 1872, 2226, 1045, 4195, 237, 8319, 7952, 8466, 5885, 451, 9373, 9404, 153, 5276, 5196, 9022, 5654, 2178, 8255, 7016, 7766, 9422, 1041, 1830, 8601, 5487, 9045, 5099, 532, 1322, 5424, 8005, 2317, 8703, 306, 6466, 4595, 9665, 9457, 5760, 3138, 2063, 1262, 4160, 7582, 6708, 8020, 9489, 600, 2265, 7384, 2108, 7457, 5073, 2484, 2778, 8736, 2454, 4701, 4099, 9634, 9667, 1395, 9766, 7697, 2660, 1953, 6756, 7100, 1037, 9484, 1764, 1675, 8249, 2168, 4652, 753, 8919, 7847, 8544, 1595, 6410, 7781, 8254, 9699, 7300, 650, 6223, 3570, 3227, 5890, 7844, 3725, 4761, 6207, 6137, 6575, 6373, 2747, 9087, 2676, 6402, 2791, 1646, 5330, 958, 9095, 8410, 9965, 6131, 2017, 2252, 6873, 8584, 442, 8855, 9940, 613, 5163, 6976, 1777, 2132, 8882, 9568, 1336, 8655, 260, 1382, 3516, 1327, 5558, 4596, 1538, 2337, 334, 5175, 1934, 6620, 5377, 9143, 8880, 8658, 5615, 9794, 9307, 1425, 8066, 3961, 2716, 2996, 5093, 7891, 9973, 5250, 2182, 1038, 3468, 8168, 5260, 9132, 6990, 2762, 1178, 6237, 7405, 5385, 6391, 9228, 1832, 6321, 3110, 7066, 3358, 5881, 9214, 1602, 5563, 2030, 8109, 6226, 1109, 4512, 7329, 3619, 2492, 1835, 208, 4122, 3675, 9114, 3213, 1778, 9771, 6707, 2620, 5973, 8216, 1905, 8178, 2797, 8919, 8464, 8079, 1718, 2795, 1726, 9125, 9993, 7749, 250, 8346, 9348, 8715, 8404, 7444, 6872, 3668, 8232, 9474, 4861, 654, 3027, 7916, 2348, 1838, 9528, 1929, 4475, 9337, 425, 7969, 4504, 4158, 3936, 7194, 7287, 3961, 2646, 135, 2306, 7563, 9474, 4922, 9020, 4102, 4701, 3068, 7183, 2602, 4288, 7268, 45, 3333, 6395, 8958, 8898, 5774, 9964, 9491, 3320, 9280, 6500, 7714, 2607, 1608, 3777, 8422, 432, 7338, 8094, 754, 6532, 2949, 9925, 2910, 6377, 7776, 6321, 9753, 2164, 441, 2273, 2841, 6281, 8459, 2385, 8207, 1394, 4668, 3668, 5834, 9688, 7913, 62, 6162, 7511, 6949, 9341, 3215, 603, 5960, 3509, 959, 9457, 7243, 4449, 9370, 3943, 1644, 7672, 9346, 1264, 155, 8294, 1080, 1571, 684, 5073, 8809, 1094, 2515, 253, 5937, 3559, 7171, 5273, 8475, 6778, 8508, 4966, 1444, 2867, 6747, 5787, 2438, 7287, 822, 6809, 8905, 4078, 976, 5760, 856, 2036, 8809, 6211, 8698, 9375, 5157, 6173, 6680, 2439, 7117, 2828, 6038, 7409, 4274, 2881, 8351, 2637, 784, 3136, 8830, 3227, 4345, 1264, 1333, 8791, 5261, 2470, 1715, 9925, 8868, 3788, 3824, 8887, 2341, 4051, 2909, 5195, 2607, 4263, 4501, 7434, 5480, 39, 2941, 8410, 7434, 5072, 2640, 1991, 473, 2153, 6877, 6445, 7464, 6193, 3486, 930, 9977, 1897, 4155, 8859, 3203, 7264, 4191, 4345, 2838, 2929, 2613, 5636, 6934, 6514, 8210, 2530, 1719, 614, 5818, 3126, 4073, 2824, 8468, 8932, 4994, 6297, 5301, 6367, 7717, 9723, 2182, 6995, 1381, 6340, 1794, 8431, 6119, 2599, 2669, 2816, 8306, 8460, 2076, 9986, 5297, 2923, 6000, 8016, 7456, 402, 522, 4709, 1532, 5761, 2850, 9745, 3512, 8496, 6965, 8740, 955, 9378, 8394, 7241, 4531, 6130, 4970, 4819, 5965, 8217, 5608, 6845, 4953, 4674, 7114, 4285, 700, 3036, 9810, 9898, 4721, 1911, 6388, 2598, 288, 4504, 4813, 424, 469, 5491, 5308, 6540, 1107, 9034, 3527, 2022, 7278, 1466, 6843, 3772, 1770, 8152, 8367, 5874, 1959, 438, 3772, 7899, 7080, 5179, 9320, 4285, 1352, 6355, 5545, 4716, 9663, 5528, 15, 6675, 1604, 5499, 4276, 7791, 6517, 9400, 4659, 7424, 6922, 5709, 3959, 4061, 204, 8157, 1182, 7501, 8754, 8365, 9508, 2590, 6898, 8186, 8445, 4275, 8894, 8189, 4717, 2165, 6036, 8514, 7862, 6430, 2480, 8385, 757, 5885, 8783, 992, 2290, 3403, 9357, 1171, 9301, 3421, 5037, 4304, 7536, 1246, 4791, 6235, 6871, 4089, 1223, 5627, 4331, 9339, 3004, 2155, 9533, 6427, 3563, 6202, 1131, 4857, 9510, 8322, 9511, 2411, 4092, 9616, 585, 4415, 723, 7406, 7845, 7003, 9109, 4088, 5026, 4801, 1823, 907, 9688, 6171, 2322, 2539, 8845, 7205, 6345, 2819, 1336, 9060, 7382, 6744, 8084, 1867, 3482, 8961, 599, 2472, 7063, 4346, 114, 2558, 1560, 2005, 4623, 8320, 8787, 34, 8736, 2800, 8680, 4740, 1741, 7222, 8747, 4652, 2574, 8244, 3993, 6615, 6482, 3892, 9330, 8559, 7092, 2126, 5585, 1095, 9320, 2507, 7079, 8001, 3102, 3198, 3452, 3880, 5273, 2693, 930, 5794, 7103, 8068, 8541, 4504, 7950, 9316, 2925, 117, 1316, 2356, 1331, 6384, 8156, 1724, 6153, 7688, 3751, 7565, 5933, 2828, 8638, 617, 7131, 122, 1169, 3110, 8183, 9060, 9099, 3199, 2352, 4757, 286, 5393, 8712, 2799, 8057, 9785, 1242, 3737, 5074, 8350, 4455, 8416, 670, 7522, 225, 7642, 501, 2389, 4591, 2234, 4115, 9384, 5149, 2455, 5576, 1113, 9385, 8983, 4626, 9118, 1786, 1149, 1039, 7774, 2899, 1970, 2803, 5293, 6635, 3694, 9553, 5835, 3069, 1992, 6277, 117, 2753, 1762, 8748, 584, 5102, 2532, 1343, 1195, 7846, 6925, 9968, 1200, 6687, 1282, 7658, 6883, 4344, 3636, 8074, 5189, 5987, 524, 2614, 8406, 3676, 777, 151, 9598, 5892, 1423, 4473, 4402, 9494, 8067, 3482, 5932, 510, 9747, 5877, 6063, 7054, 6118, 5621, 8176, 2369, 3079, 1836, 3521, 8482, 1432, 1935, 5851, 1310, 2044, 8781, 6664, 6163, 113, 8454, 6496, 8551, 590, 3803, 6030, 8970, 6612, 393, 4517, 1886, 2874, 5664, 1952
            };

            Solution s = new Solution();

            int[] answers1 = s.solution(prices4);
            print(answers1);
        }

        public static void print(int[] arr) {
            for (int e : arr) {
                System.out.print(e + " ");
            }
            System.out.println();
        }
    }
}
